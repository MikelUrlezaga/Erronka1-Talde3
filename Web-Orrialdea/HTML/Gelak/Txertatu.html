<!DOCTYPE html>
    <head>
        <meta charset="UTF-8">
        <script src="../../script/aldagaiGlobalak.js" ></script>
        <script src="../../script/menu.js" ></script>
        <link rel="stylesheet" href="../../CSS/styles.css">
        <link rel="icon" href="../../IMG/LOGO.png" type="image/x-icon">
        <title>Gela Txertatu</title>
    </head>
    <body onkeydown="teclado(event)">
        <header>
        <a class="logoHeader" href="../../HTML/Orokorra/Home.html">
                <img class="logo" src="../../IMG/LOGO.png">
            </a>
            <p class="titulo">GELA TXERTATU</p>
            <div class="headerdiv">
                <a href="Taula.html">
                    <img class="headerimg" src="../../IMG/arrow.png" href="Taula.html">
                </a>
                <p>&nbsp;</p>
                <a href="../../HTML/Orokorra/Login.html">
                    <img class="headerimg" src="../../IMG/LogOut.png">
                </a>
            </div>
        </header>
        <div class="reborde">
                <br>
                <p class="texto1Columna">Izena: </p>
                <input class="textBox1Columna" type="text" id="IzenaGelaTxertatu" name="Izena">
                <p class="texto1Columna">Taldea: </p>
                <input class="textBox1Columna" type="number" id="TaldeaGelaTxertatu" name="Taldea">
                <div class="ck">
                    <img src="../../IMG/unnamed.png" alt="check" class="checkicon" onclick="createGela()">
                </div>
        </div>
    </body>
    <div id="menuMugikorra"></div>
</html>
<script>
    function teclado(event) {
    var codigo = event.which || event.keyCode;
    if (codigo==13) {
        createGela()
    }
}
    function createGela() {
        var izena = document.getElementById("IzenaGelaTxertatu").value;
        var taldea = document.getElementById("TaldeaGelaTxertatu").value;
        var clasea = {izena, taldea};
        var js = JSON.stringify(clasea);
        console.log(js);
        if (izena == "" || taldea == "") {
            alert("Datuak ondo zartuta daudela zihurtatu");
        }else{
            fetch(rutaBack + 'gelak_json.php', {method: 'POST', body: js})
                .then(function (response) {
                        return response.text();
                })
                .then(data=>{
                    console.log(data);
                    if(data.includes("Data too long")){
                        alert("Gelaren izena oso luzea da. Gehienez 4 karaktere izan ditzake.")
                    }else{
                        alert(izena+" txertatuta");
                    }
                    
                })
                // .catch(error => {
                //     //console.log("Erregistro hau beste taula batean erabiltzen ari da, beraz, ezin da ezabatu" + error);
                // });
        }
}
</script>