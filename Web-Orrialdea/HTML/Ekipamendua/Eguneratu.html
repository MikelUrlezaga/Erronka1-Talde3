<!DOCTYPE html>
    <head>
        <meta charset="UTF-8">
        <script src="../../script/menu.js" ></script>
        <link rel="stylesheet" href="../../CSS/styles.css">
        <link rel="icon" href="../../IMG/LOGO.png" type="image/x-icon">
        <title>Ekipamendua Eguneratu</title>
    </head>
    <header>
            <img class="logo" src="../../IMG/LOGO.png">
            <p class="titulo">EKIPAMENDUA EGUNERATU</p>
            <div class="headerdiv">
                <a href="Taula.html">
                    <img class="headerimg" src="../../IMG/arrow.png">
                </a>
                <p>&nbsp;</p>
                <a href="../../HTML/Orokorra/Login.html">
                    <img class="headerimg" src="../../IMG/LogOut.png">
                </a>
            </div>
    </header>
    <body>
        <div class="reborde">
                <div class="custom-combobox">
                    <select id="selecTxertatu">
                        <option value="opcion1">Opci贸n 1</option>
                        <option value="opcion2">Opci贸n 2</option>
                        <option value="opcion3">Opci贸n 3</option>
                        <option value="opcion4">Opci贸n 4</option>
                    </select>
                </div>
                <br>
                <div class="dobleColumn">
                    <div>
                        <p class="texto">Izena: </p>
                        <input class="textBox" type="text" id="izenaEkipamenduaEguneratu" name="Izena" >
                    </div>
                    <div>
                        <p class="texto">Marka: </p>
                        <input class="textBox" type="text" id="markaEkipamenduaEguneratu" name="Marka">
                    </div>
                    <div>
                        <p class="texto">Deskribapena: </p>
                        <input class="textBox" type="text" id="deskribapenaEkipamenduaEguneratu" name="Deskribapena">
                    </div>
                    <div>
                        <p class="texto">Modelo: </p>
                        <input class="textBox" type="text" id="modeloEkipamenduaEguneratu" name="Modelo" >
                    </div>
                    <div>
                        <p class="texto">Id Kategoria: </p>
                        <input class="textBox" type="text" id="idKategoriaEkipamenduaEguneratu" name="IdKategoria">
                    </div>
                    <div>
                        <p class="texto">Stock: </p>
                        <input class="textBox" type="text" id="stockEkipamenduaEguneratu" name="Stock">
                    </div>
                    <div class="ck">
                        <img src="../../IMG/unnamed.png" alt="check" class="checkicon">
                    </div>
                </div>
                
        </div>
        
    </body>

    <div id="menuMugikorra"></div>

</html>
<script>
    
    function cargarKatego(){
        let options = {
            method: "GET",
            mode: 'cors'
        };
        fetch("../../PHP/kategoriak_json.php", options)
            .then(response => response.json())  // Analiza la respuesta JSON
            .then(data => {
                console.log(data);
                console.log(data.length);
                for (i = 0; i < data.length; i++) {
                    var opElement = document.createElement("option");
                    opElement.value = data[i].id;
                    opElement.innerText = data[i].izena;
                    document.getElementById("selecTxertatu").appendChild(opElement);
                }
            })
            .catch(error => {
                alert("Errorea." + error);
            });
    }
    window.addEventListener("load", cargarKatego);
    function updateErabiltzailea() {
        var izena = document.getElementById("izenaEkipamenduaTxertatu").value;
        var marka = document.getElementById("markaEkipamenduaTxertatu").value;
        var deskribapena = document.getElementById("deskribapenaEkipamenduaTxertatu").value;
        var modelo = document.getElementById("modeloEkipamenduaTxertatu").value;
        var kategoria = document.getElementById("kategoriaEkipamenduaTxertatu").value;
        var stock = document.getElementById("stockEkipamenduaTxertatu").value;
        var clasea = {izena, marka, deskribapena, modelo, kategoria, stock};
        var js = JSON.stringify(clasea);
        console.log(js);
        fetch('../../PHP/ekipamendua.php', {method: 'PUSH', body: js})
            .then(function (response) {
                    return response.text();
            })
            .then(data=>{
                console.log(data);
                
            })
            // .catch(error => {
            //     //console.log("Erregistro hau beste taula batean erabiltzen ari da, beraz, ezin da ezabatu" + error);
            // });
    }
    
    
</script>